-- Game ID Lock
if game.PlaceId ~= 109983668079237 then
    pcall(function()
        game.Players.LocalPlayer:Kick("wrong game bud")
    end)
    return
end

-- Safe player reference
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

if not Player then
    repeat task.wait() until Players.LocalPlayer
    Player = Players.LocalPlayer
end

-- Services cache
local Services = {
    Players = Players,
    CoreGui = game:GetService("CoreGui"),
    RunService = game:GetService("RunService"),
    UserInputService = game:GetService("UserInputService"),
    TweenService = game:GetService("TweenService"),
    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    Workspace = game:GetService("Workspace")
}

-- Character setup
spawn(function()
    if Player.Character then
        _G.Char = Player.Character
        _G.Hum = Player.Character:FindFirstChildOfClass("Humanoid")
        _G.Root = Player.Character:FindFirstChild("HumanoidRootPart")
    end
    Player.CharacterAdded:Connect(function(char)
        _G.Char = char
        _G.Hum = char:FindFirstChildOfClass("Humanoid")
        _G.Root = char:FindFirstChild("HumanoidRootPart")
    end)
end)

-- Anti-debug
spawn(function()
    if debug and debug.getinfo then
        local info = debug.getinfo(2, "S")
        if info and info.source and string.find(info.source, "@") then
            pcall(function() Player:Kick("no dumping allowed") end)
        end
    end
end)

-- Dex / Spy detection
local badNames = {
    ExplorerSelections = true, EditAttributeButton = true, Dex = true, DEX = true,
    SimpleSpy = true, TurtleSpy = true, AwesomeExplorer = true, Hydroxide = true,
    RemoteSpy = true, RemoteBrowser = true, PropertiesFrame = true, ExplorerPanel = true
}

local badAssets = {
    ["rbxassetid://5054663650"] = true,
    ["rbxassetid://1427967925"] = true,
    ["rbxassetid://9887697099"] = true,
    ["rbxassetid://9887696628"] = true,
    ["rbxassetid://9896472554"] = true,
    ["rbxassetid://9887696922"] = true,
    ["rbxassetid://9887696242"] = true,
    ["rbxassetid://169476802"] = true,
    ["rbxassetid://5642383285"] = true,
    ["rbxassetid://1204397029"] = true
}

local badPhrases = {
    "clear logs", "exclude", "ignores remotes", "remotespy", "simple spy", "turtle spy",
    "remote spy", "invoke", "fire server", "block remote", "log remote", "spy remote"
}

local function isBad(obj)
    if not obj then return false end
    if badNames[obj.Name] then return true end
    if obj:IsA("ImageLabel") or obj:IsA("ImageButton") then
        local success, img = pcall(function() return obj.Image end)
        if success and badAssets[img] then return true end
    end
    local n = string.lower(obj.Name or "")
    if string.find(n, "dex") or string.find(n, "spy") then
        if not string.find(n, "index") then return true end
    end
    return false
end

local hits = 0
local last = 0

local function checkObj(o)
    if isBad(o) then
        local now = tick()
        if now - last > 5 then hits = 0 end
        last = now
        hits = hits + 1
        if hits >= 4 then pcall(function() Player:Kick("tool detected") end) end
    end
end

local function checkText(o)
    if o:IsA("TextLabel") or o:IsA("TextButton") or o:IsA("TextBox") then
        local success, t = pcall(function() return o.Text end)
        if success and t then
            local l = string.lower(t)
            for _, p in ipairs(badPhrases) do
                if string.find(l, p) then
                    pcall(function() Player:Kick("spy detected") end)
                    return
                end
            end
        end
    end
end

-- Print guard
spawn(function()
    local old = print
    local r = false
    print = function(...)
        if r then return old(...) end
        r = true
        for _, v in {...} do
            if type(v) == "string" then
                local l = string.lower(v)
                if string.find(l, "remotespy") or string.find(l, "blacklisted") then
                    r = false
                    pcall(function() Player:Kick("logger detected") end)
                    return
                end
            end
        end
        r = false
        old(...)
    end
end)

-- Watch new GUI
Services.CoreGui.DescendantAdded:Connect(function(o)
    spawn(function()
        checkObj(o)
        checkText(o)
    end)
end)

-- Services

local pgui = Player:WaitForChild("PlayerGui")

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NyoaSs"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = pgui

local obj = Workspace:WaitForChild("Plots")

-- Notify
local function createNotify(text)
	local notify = Instance.new("Frame")
	notify.Size = UDim2.new(0,300,0,56)
	notify.Position = UDim2.new(0.5,-150,0,-70)
	notify.BackgroundColor3 = Color3.fromRGB(20,20,24)
	notify.BorderSizePixel = 0
	notify.ClipsDescendants = true
	notify.ZIndex = 999
	notify.Parent = screenGui
	Instance.new("UICorner",notify).CornerRadius = UDim.new(0,10)
	local stroke = Instance.new("UIStroke",notify)
	stroke.Color = Color3.new(1,1,1)
	stroke.Transparency = 0.8
	stroke.Thickness = 1

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1,-50,0,22)
	title.Position = UDim2.new(0,12,0,8)
	title.BackgroundTransparency = 1
	title.Text = text
	title.TextColor3 = Color3.new(1,1,1)
	title.Font = Enum.Font.GothamBold
	title.TextSize = 15
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.ZIndex = 999
	title.Parent = notify

	local author = Instance.new("TextLabel")
	author.Size = UDim2.new(1,-50,0,16)
	author.Position = UDim2.new(0,12,0,30)
	author.BackgroundTransparency = 1
	author.Text = "by Slivkineepy, Menanes"
	author.TextColor3 = Color3.fromRGB(160,160,170)
	author.Font = Enum.Font.Gotham
	author.TextSize = 12
	author.TextXAlignment = Enum.TextXAlignment.Left
	author.ZIndex = 999
	author.Parent = notify

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0,24,0,24)
	closeBtn.Position = UDim2.new(1,-32,0,8)
	closeBtn.BackgroundTransparency = 1
	closeBtn.Text = "x"
	closeBtn.TextColor3 = Color3.fromRGB(180,180,180)
	closeBtn.Font = Enum.Font.GothamBold
	closeBtn.TextSize = 18
	closeBtn.ZIndex = 999
	closeBtn.Parent = notify

	local barBg = Instance.new("Frame")
	barBg.Size = UDim2.new(1,-24,0,3)
	barBg.Position = UDim2.new(0,12,1,-10)
	barBg.BackgroundColor3 = Color3.fromRGB(40,40,45)
	barBg.ZIndex = 999
	barBg.Parent = notify
	Instance.new("UICorner",barBg).CornerRadius = UDim.new(0,2)

	local bar = Instance.new("Frame")
	bar.Size = UDim2.new(1,0,1,0)
	bar.BackgroundColor3 = Color3.fromRGB(100,180,255)
	bar.ZIndex = 999
	bar.Parent = barBg
	Instance.new("UICorner",bar).CornerRadius = UDim.new(0,2)

	local shown = false
	local function hide()
		if shown then
			shown = false
			TweenService:Create(notify,TweenInfo.new(0.4,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,-70)}):Play()
			task.wait(0.45)
			notify:Destroy()
		end
	end
	local function show()
		shown = true
		TweenService:Create(notify,TweenInfo.new(0.5,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,12)}):Play()
		local t = TweenService:Create(bar,TweenInfo.new(5,Enum.EasingStyle.Linear),{Size=UDim2.new(0,0,1,0)})
		t:Play()
		t.Completed:Wait()
		if shown then hide() end
	end
	closeBtn.MouseButton1Click:Connect(hide)
	task.spawn(show)
end

createNotify("NyoaSs loaded! Enjoy :)")

-- Dраггинг
local function Drag(frame, handle)
	handle = handle or frame
	local dragging = false
	local dragInput, dragStart, startPos
	local function update(input)
		local delta = input.Position - dragStart
		frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
	handle.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = frame.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then dragging = false end
			end)
		end
	end)
	handle.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if dragging and (input == dragInput or input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
			update(input)
		end
	end)
end

-- сквозь плоты крч
local xrayEnabled = false
local xrayConnection = nil

local function XrayOn(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0.75
		end
		XrayOn(v)
	end
end

local function XrayOff(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0
		end
		XrayOff(v)
	end
end

-- база есп
local PlotESP_Enabled = false
local PlotESP_Data = {}

local function CreatePlotESP(plot)
    if not plot or not plot:FindFirstChild("Spawn") or PlotESP_Data[plot] then return end
    local spawn = plot.Spawn

    if spawn:FindFirstChild("PlotESP_Billboard") then spawn.PlotESP_Billboard:Destroy() end

    local bill = Instance.new("BillboardGui")
    bill.Name = "PlotESP_Billboard"
    bill.Adornee = spawn
    bill.Size = UDim2.new(0,200,0,80)
    bill.StudsOffset = Vector3.new(0,25,0)
    bill.AlwaysOnTop = true
    bill.Parent = spawn

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1,0,1,0)
    frame.BackgroundTransparency = 1
    frame.Parent = bill

    local owner = Instance.new("TextLabel")
    owner.Size = UDim2.new(1,0,0.5,0)
    owner.BackgroundTransparency = 1
    owner.TextColor3 = Color3.fromRGB(0,255,255)
    owner.Font = Enum.Font.Arcade
    owner.TextSize = 28
    owner.TextStrokeTransparency = 0
    owner.Text = plot:FindFirstChild("Owner") and "Owner: "..plot.Owner.Value or "Free"
    owner.Parent = frame

    local dist = Instance.new("TextLabel")
    dist.Size = UDim2.new(1,0,0.5,0)
    dist.Position = UDim2.new(0,0,0.5,0)
    dist.BackgroundTransparency = 1
    dist.TextColor3 = Color3.fromRGB(255,255,100)
    dist.Font = Enum.Font.Arcade
    dist.TextSize = 24
    dist.TextStrokeTransparency = 0
    dist.Parent = frame

    local conn = game:GetService("RunService").Heartbeat:Connect(function()
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local d = (player.Character.HumanoidRootPart.Position - spawn.Position).Magnitude
            dist.Text = string.format("%.0f studs", d)
            if plot:FindFirstChild("Owner") then owner.Text = "Owner: "..plot.Owner.Value end
        end
    end)

    PlotESP_Data[plot] = {bill=bill, owner=owner, dist=dist, conn=conn}
end

local function RemovePlotESP(plot)
    if not PlotESP_Data[plot] then return end
    if PlotESP_Data[plot].bill then PlotESP_Data[plot].bill:Destroy() end
    if PlotESP_Data[plot].conn then PlotESP_Data[plot].conn:Disconnect() end
    PlotESP_Data[plot] = nil
end

-- fлай
local NyoaFly_Enabled = false

local function OpenNyoaFly()
    if NyoaFly_Enabled then return end
    NyoaFly_Enabled = true

    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local player = Players.LocalPlayer
    local pgui = player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsFly"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "NyoaSs Fly: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local flying = false
    local conn = nil
    local speed = 28.5

    local function getHRP()
        return player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    end

    local function start()
        if flying then return end
        flying = true
        btn.Text = "NyoaSs Fly: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        conn = RunService.Heartbeat:Connect(function()
            local hrp = getHRP()
            if hrp and flying then
                hrp.Velocity = workspace.CurrentCamera.CFrame.LookVector * speed
            end
        end)
    end

    local function stop()
        if not flying then return end
        flying = false
        btn.Text = "NyoaSs Fly: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() end
        local hrp = getHRP()
        if hrp then hrp.Velocity = Vector3.zero end
    end

    btn.MouseButton1Click:Connect(function()
        if flying then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaFly_Enabled = false
    end)

    player.CharacterAdded:Connect(function()
        task.wait(0.3)
        if flying then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    player.CharacterRemoving:Connect(stop)
end

-- bуст
local NyoaBoost_Enabled = false

local function OpenNyoaBoost()
    if NyoaBoost_Enabled then return end
    NyoaBoost_Enabled = true

    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local player = Players.LocalPlayer
    local pgui = player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsBoost"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Nyoa.Ss Boost: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local running = false
    local conn = nil
    local speed = 28.5

    local function getHRP()
        return player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    end

    local function start()
        if running then return end
        running = true
        btn.Text = "Nyoa.Ss Boost: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        conn = RunService.Heartbeat:Connect(function()
            local hrp = getHRP()
            if not hrp or not running then return end
            local direction = workspace.CurrentCamera.CFrame.LookVector * Vector3.new(1,0,1)
            if direction.Magnitude > 0 then
                direction = direction.Unit
                hrp.Velocity = Vector3.new(direction.X * speed, hrp.Velocity.Y, direction.Z * speed)
            end
        end)
    end

    local function stop()
        if not running then return end
        running = false
        btn.Text = "Nyoa.Ss Boost: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() end
        local hrp = getHRP()
        if hrp then hrp.Velocity = Vector3.new(0, hrp.Velocity.Y, 0) end
    end

    btn.MouseButton1Click:Connect(function()
        if running then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaBoost_Enabled = false
    end)

    player.CharacterAdded:Connect(function()
        task.wait(0.3)
        if running then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    player.CharacterRemoving:Connect(stop)
end

-- таймер есп
local PlotTimeESP_Data = {}

local function GetPlotTime(plot)
    if plot:FindFirstChild("Timer") then return plot.Timer.Value end
    if plot:FindFirstChild("TimeLeft") then return plot.TimeLeft.Value end
    if plot:FindFirstChild("Time") then return plot.Time.Value end
    if plot:GetAttribute("TimeLeft") then return plot:GetAttribute("TimeLeft") end
    if plot:GetAttribute("Timer") then return plot:GetAttribute("Timer") end
    return nil
end

local function CreateTimeESP(plot)
    if not plot or not plot:FindFirstChild("Spawn") or PlotTimeESP_Data[plot] then return end
    local spawn = plot.Spawn

    local bill = Instance.new("BillboardGui")
    bill.Name = "PlotTimeESP"
    bill.Adornee = spawn
    bill.Size = UDim2.new(0,200,0,40)
    bill.StudsOffset = Vector3.new(0,15,0)
    bill.AlwaysOnTop = true
    bill.Parent = spawn

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(100,255,100)
    label.Font = Enum.Font.Arcade
    label.TextSize = 30
    label.TextStrokeTransparency = 0
    label.Text = "Time: ∞"
    label.Parent = bill

    local conn = game:GetService("RunService").Heartbeat:Connect(function()
        local t = GetPlotTime(plot)
        if t and t > 0 then
            local m = math.floor(t/60)
            local s = t%60
            label.Text = string.format("Time: %02d:%02d", m, s)
            label.TextColor3 = t < 60 and Color3.fromRGB(255,50,50) or Color3.fromRGB(100,255,100)
        else
            label.Text = "Time: ∞"
            label.TextColor3 = Color3.fromRGB(150,150,150)
        end
    end)

    PlotTimeESP_Data[plot] = {bill=bill, label=label, conn=conn}
end

local function RemoveTimeESP(plot)
    if not PlotTimeESP_Data[plot] then return end
    if PlotTimeESP_Data[plot].bill then PlotTimeESP_Data[plot].bill:Destroy() end
    if PlotTimeESP_Data[plot].conn then PlotTimeESP_Data[plot].conn:Disconnect() end
    PlotTimeESP_Data[plot] = nil
end

-- флоат
local FloatGui_Enabled = false

local function OpenFloatGui()
    if FloatGui_Enabled then return end
    FloatGui_Enabled = true

    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local lp = Players.LocalPlayer
    local pgui = lp.PlayerGui

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSs_FloatGui"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 140, 0, 44)
    frame.Position = UDim2.new(0.02, 0, 0.33, 0)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 1, -12)
    btn.Position = UDim2.new(0, 6, 0, 6)
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    btn.Text = "Float: OFF"
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0, 26, 0, 26)
    close.Position = UDim2.new(1, -16, 0, -10)
    close.BackgroundColor3 = Color3.fromRGB(190, 30, 30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1, 1, 1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner", close).CornerRadius = UDim.new(0, 8)

    local enabled = false
    local floatPart, bodyVel, con

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "Float: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0, 130, 200)

        local char = lp.Character or lp.CharacterAdded:Wait()
        local root = char:WaitForChild("HumanoidRootPart")
        local hum = char:WaitForChild("Humanoid")

        floatPart = Instance.new("Part")
        floatPart.Size = Vector3.new(4, 1, 4)
        floatPart.Transparency = 1
        floatPart.CanCollide = false
        floatPart.Anchored = false
        floatPart.Massless = true
        floatPart.Parent = workspace

        local weld = Instance.new("Weld")
        weld.Part0 = root
        weld.Part1 = floatPart
        weld.C0 = CFrame.new(0, -3.5, 0)
        weld.Parent = floatPart

        bodyVel = Instance.new("BodyVelocity")
        bodyVel.MaxForce = Vector3.new(0, 99999, 0)
        bodyVel.P = 3000
        bodyVel.Velocity = Vector3.new(0, 0, 0)
        bodyVel.Parent = floatPart

        con = RunService.Stepped:Connect(function()
            if not enabled or hum.Health <= 0 then return end
            local state = hum:GetState()
            local inAir = state == Enum.HumanoidStateType.Freefall or state == Enum.HumanoidStateType.FallingDown or state == Enum.HumanoidStateType.Jumping
            local ray = workspace:Raycast(root.Position, Vector3.new(0, -5, 0))
            local onGround = ray ~= nil
            if inAir or not onGround then
                bodyVel.Velocity = Vector3.new(0, -3.2, 0)
            else
                bodyVel.Velocity = Vector3.new(0, 0, 0)
            end
        end)
    end

    local function stop()
        enabled = false
        btn.Text = "Float: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        if floatPart then floatPart:Destroy() end
        if con then con:Disconnect() end
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        FloatGui_Enabled = false
    end)

    lp.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)
end

-- Друзья
local FriendsGUI_Enabled = false

local function OpenFriendsGUI()
    if FriendsGUI_Enabled then return end
    FriendsGUI_Enabled = true

    local Players = game:GetService("Players")
    local UserInputService = game:GetService("UserInputService")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local player = Players.LocalPlayer

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsFriendsToggle"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Allow Friends"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton", frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local dragging = false
    local dragStart = nil
    local startPos = nil

    local function updateDrag(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
        end
    end)

    frame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            updateDrag(input)
        end
    end)

    local remote = ReplicatedStorage.Packages.Net["RE/PlotService/ToggleFriends"]

    btn.MouseButton1Click:Connect(function()
        remote:FireServer()
    end)

    close.MouseButton1Click:Connect(function()
        gui:Destroy()
        FriendsGUI_Enabled = false
    end)
end

-- Анти рагдолл
local RagdollDesync_Enabled = false
local RagdollConnections = {}

local function EnableRagdollDesync()
    if RagdollDesync_Enabled then return end
    RagdollDesync_Enabled = true

    local Players = game:GetService("Players")
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local RunService = game:GetService("RunService")
    local lp = Players.LocalPlayer

    local char = lp.Character or lp.CharacterAdded:Wait()
    local hum = char:WaitForChild("Humanoid")
    local root = char:WaitForChild("HumanoidRootPart")

    for _, mod in ipairs(getloadedmodules()) do
        if mod.Name:lower():find("ragdoll") then
            local success, controller = pcall(require, mod)
            if success and type(controller) == "table" then
                if isreadonly(controller) then setreadonly(controller, false) end
                controller.Start = function() end
                controller.IsInRagdoll = function() return false end
                controller.ToggleControls = function() end
                setreadonly(controller, true)
            end
        end
    end

    local pkg = ReplicatedStorage:FindFirstChild("Packages")
    if pkg then
        local rag = pkg:FindFirstChild("Ragdoll")
        if rag then
            local remote = rag:FindFirstChild("Ragdoll")
            if remote then
                RagdollConnections.remote = remote.OnClientEvent:Connect(function() end)
            end
        end
    end

    RagdollConnections.heartbeat = RunService.Heartbeat:Connect(function()
        pcall(function()
            if hum:GetState() == Enum.HumanoidStateType.Physics then
                hum:ChangeState(Enum.HumanoidStateType.GettingUp)
            end
            workspace.CurrentCamera.CameraSubject = hum
            root.CanCollide = true
        end)
    end)

    RagdollConnections.descendant = char.DescendantAdded:Connect(function(obj)
        if obj:IsA("BallSocketConstraint") or obj:IsA("HingeConstraint") or obj:IsA("NoCollisionConstraint") then
            obj:Destroy()
        end
    end)

    RagdollConnections.charAdded = lp.CharacterAdded:Connect(function(newChar)
        char = newChar
        hum = newChar:WaitForChild("Humanoid")
        root = newChar:WaitForChild("HumanoidRootPart")
    end)
end

local function DisableRagdollDesync()
    if not RagdollDesync_Enabled then return end
    RagdollDesync_Enabled = false
    for _, conn in pairs(RagdollConnections) do
        if typeof(conn) == "RBXScriptConnection" then
            conn:Disconnect()
        end
    end
    RagdollConnections = {}
end

--Анти HИт
local AntiHit_Enabled = false
local AntiHit_Connections = {}

local function EnableAntiHit()
	if AntiHit_Enabled then return end
	AntiHit_Enabled = true

	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local LocalPlayer = Players.LocalPlayer

	local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
	local Humanoid = Character:WaitForChild("Humanoid")

	Humanoid.BreakJointsOnDeath = false

	for _, Part in pairs(Character:GetDescendants()) do
		if Part:IsA("BasePart") then
			Part.CanCollide = false
			Part.Massless = false
			Part.Touched:Connect(function() end)
		end
	end

	AntiHit_Connections.Knockback = RunService.Stepped:Connect(function()
		if not AntiHit_Enabled then return end
		local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
		if not root then return end

		for _, Obj in pairs(root:GetChildren()) do
			if Obj:IsA("BodyVelocity") or Obj:IsA("BodyMover") or Obj:IsA("VectorForce") then
				Obj:Destroy()
			end
		end

		local Vel = root.Velocity
		local Move = Humanoid.MoveDirection * Humanoid.WalkSpeed
		root.Velocity = Vector3.new(Move.X, Vel.Y, Move.Z)
	end)

	AntiHit_Connections.Respawn = LocalPlayer.CharacterAdded:Connect(function(Char)
		task.wait()
		for _, Part in pairs(Char:GetDescendants()) do
			if Part:IsA("BasePart") then
				Part.CanCollide = false
				Part.Massless = false
			end
		end
	end)
end

local function DisableAntiHit()
	AntiHit_Enabled = false

	for _, Conn in pairs(AntiHit_Connections) do
		if Conn.Connected then
			Conn:Disconnect()
		end
	end
	AntiHit_Connections = {}

	local Char = LocalPlayer.Character
	if Char then
		for _, Part in pairs(Char:GetDescendants()) do
			if Part:IsA("BasePart") then
				Part.CanCollide = true
			end
		end
	end
end

local NyoaFlyGrapple_Enabled = false

local function OpenNyoaFlyGrapple()
    if NyoaFlyGrapple_Enabled then return end
    NyoaFlyGrapple_Enabled = true

    local Players = game:GetService("Players")
    local RS = game:GetService("ReplicatedStorage")
    local RunS = game:GetService("RunService")
    local player = Players.LocalPlayer
    local pgui = player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsFly"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame",gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton",frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "NyoaSs Fly: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton",frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local enabled = false
    local conn = nil
    local flySpeed = 130
    local item = "Grapple Hook"
    local useRE = RS:WaitForChild("Packages"):,10"):WaitForChild("Net",10):WaitForChild("RE/UseItem",10)
    local args = {0.10267777442932129}

    local function buy() pcall(function() RS.Packages.Net["RF/CoinsShopService/RequestBuy"]:InvokeServer(item) end) end
    local function equip() if player.Character then local t = player.Character:FindFirstChild(item) or player.Backpack:FindFirstChild(item) if t then t.Parent = player.Character end end end
    local function fake() if player.Character and player.Character:FindFirstChild(item) then pcall(function() useRE:FireServer(unpack(args)) end) end end

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "NyoaSs Fly: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        buy()
        task.wait(0.5)
        equip()

        conn = RunS.Heartbeat:Connect(function()
            local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if hrp and enabled then
                fake()
                hrp.Velocity = workspace.CurrentCamera.CFrame.LookVector * flySpeed
            end
        end)
    end

    local function stop()
        if not enabled then return end
        enabled = false
        btn.Text = "NyoaSs Fly: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() conn = nil end
        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if hrp then hrp.Velocity = Vector3.zero end
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaFlyGrapple_Enabled = false
    end)

    player.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    player.CharacterRemoving:Connect(stop)

    if player.Character then
        player.Character:WaitForChild("HumanoidRootPart")
    end
end

-- бРаинрот
local BestPetESP_Enabled = false

local function EnableBestPetESP()
    if BestPetESP_Enabled then return end
    BestPetESP_Enabled = true

    local Players = game:GetService("Players")
    local lp = Players.LocalPlayer
    local char = lp.Character or lp.CharacterAdded:Wait()
    local root = char:WaitForChild("HumanoidRootPart")

    local highlight = Instance.new("Highlight")
    highlight.FillColor = Color3.fromRGB(255,255,0)
    highlight.OutlineColor = Color3.fromRGB(255,255,0)
    highlight.FillTransparency = 1
    highlight.OutlineTransparency = 1
    highlight.Parent = workspace

    local beam = Instance.new("Beam")
    beam.Width0 = 1.7
    beam.Width1 = 1.7
    beam.Color = ColorSequence.new(Color3.fromRGB(255,255,0))
    beam.FaceCamera = true
    beam.LightInfluence = 1
    beam.Transparency = NumberSequence.new(0)
    beam.Parent = workspace

    local startAttach = Instance.new("Attachment")
    startAttach.Parent = root
    beam.Attachment0 = startAttach

    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0,220,0,80)
    billboard.AlwaysOnTop = true
    billboard.MaxDistance = 100000
    billboard.Parent = workspace

    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1,0,1,0)
    textLabel.BackgroundTransparency = 1
    textLabel.TextScaled = true
    textLabel.Font = Enum.Font.Arcade
    textLabel.RichText = true
    textLabel.Parent = billboard

    local function extractNumber(str)
        if not str then return 0 end
        local n = str:match("%$(.-)/s")
        if not n then return 0 end
        n = n:gsub("%s","")
        local m = 1
        if n:lower():find("k") then m=1e3 n=n:gsub("[kK]","")
        elseif n:lower():find("m") then m=1e6 n=n:gsub("[mM]","")
        elseif n:lower():find("b") then m=1e9 n=n:gsub("[bB]","") end
        return tonumber(n) and tonumber(n)*m or 0
    end

    local function formatMoney(v)
        if v >= 1e9 then return string.format("%.1fB",v/1e9)
        elseif v >= 1e6 then return string.format("%.1fM",v/1e6)
        elseif v >= 1e3 then return string.format("%.1fK",v/1e3)
        else return tostring(v) end
    end

    local function getMyBase()
        local plots = workspace:FindFirstChild("Plots")
        if not plots then return nil end
        for _, plot in ipairs(plots:GetChildren()) do
            local sign = plot:FindFirstChild("PlotSign")
            local base = plot:FindFirstChild("DeliveryHitbox")
            if sign and sign:FindFirstChild("YourBase") and base and sign.YourBase.Enabled then
                return base
            end
        end
        return nil
    end

    local function getAllPodiums()
        local podiums = {}
        local myBase = getMyBase()
        local plots = workspace:FindFirstChild("Plots")
        if not plots then return podiums end

        for _, plot in ipairs(plots:GetChildren()) do
            local pods = plot:FindFirstChild("AnimalPodiums")
            if pods then
                for _, pod in ipairs(pods:GetChildren()) do
                    local base = pod:FindFirstChild("Base")
                    local spawn = base and base:FindFirstChild("Spawn")
                    if spawn and base ~= myBase then
                        table.insert(podiums, base)
                    end
                end
            end
        end
        return podiums
    end

    task.spawn(function()
        while BestPetESP_Enabled do
            local bestBase = nil
            local bestOverhead = nil
            local bestValue = -math.huge

            for _, base in ipairs(getAllPodiums()) do
                local spawn = base:FindFirstChild("Spawn")
                local attach = spawn and spawn:FindFirstChild("Attachment")
                local overhead = attach and attach:FindFirstChild("AnimalOverhead")
                local gen = overhead and overhead:FindFirstChild("Generation")

                if gen then
                    local val = extractNumber(gen.Text)
                    if val > bestValue then
                        bestValue = val
                        bestBase = base
                        bestOverhead = overhead
                    end
                end
            end

            if bestBase and bestOverhead then
                highlight.Adornee = bestBase
                highlight.FillTransparency = 0
                highlight.OutlineTransparency = 0
                billboard.Adornee = bestBase

                local nameObj = bestOverhead:FindFirstChild("DisplayName")
                local name = nameObj and nameObj.Text or "Unknown"

                textLabel.Text =
                    "<font color='#FFFFFF'>"..name.."</font>\n"..
                    "<font color='#00FF00'>$"..formatMoney(bestValue).."/S</font>"

                local endAttach = bestBase:FindFirstChild("BeamEndAttach")
                if not endAttach then
                    endAttach = Instance.new("Attachment")
                    endAttach.Name = "BeamEndAttach"
                    endAttach.Position = Vector3.new(0,3,0)
                    endAttach.Parent = bestBase
                end
                beam.Attachment1 = endAttach
            else
                highlight.Adornee = nil
                highlight.FillTransparency = 1
                highlight.OutlineTransparency = 1
                billboard.Adornee = nil
                beam.Attachment1 = nil
            end

            task.wait(2)
        end
    end)
end

local function DisableBestPetESP()
    BestPetESP_Enabled = false
    highlight.Adornee = nil
    highlight.FillTransparency = 1
    highlight.OutlineTransparency = 1
    billboard.Adornee = nil
    beam.Attachment1 = nil
end

-- Invиз логика
local Invisible_Enabled = false

local function OpenInvisible()
    if Invisible_Enabled then return end
    Invisible_Enabled = true

    local Players = game:GetService("Players")
    local lp = Players.LocalPlayer
    local pgui = lp.PlayerGui
    local camera = workspace.CurrentCamera

    local gui = Instance.new("ScreenGui", pgui)
    gui.ResetOnSpawn = false
    gui.Name = "InvisibleGUI"

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Invisible: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton", frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local enabled = false

    local function toggleInvisible(state)
        local char = lp.Character or lp.CharacterAdded:Wait()
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not humanoid or not hrp then return end

        if state then
            local camCFrame = camera.CFrame
            camera.CameraType = Enum.CameraType.Scriptable
            camera.CFrame = camCFrame
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
            char:PivotTo(hrp.CFrame - Vector3.new(0,70,0))
            task.wait(0.1)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = true end
            end
            humanoid.PlatformStand = true
            task.wait(1.5)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
            char:PivotTo(hrp.CFrame - Vector3.new(0,70,0))
            task.wait(0.1)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = true end
            end
            humanoid.PlatformStand = true
            camera.CameraType = Enum.CameraType.Custom
        else
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = true end
            end
            camera.CameraType = Enum.CameraType.Custom
        end
    end

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "Invisible: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,130,200)
        toggleInvisible(true)
    end

    local function stop()
        if not enabled then return end
        enabled = false
        btn.Text = "Invisible: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        toggleInvisible(false)
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        Invisible_Enabled = false
    end)

    lp.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)
end

-- Главное Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,420,0,300)
mainFrame.Position = UDim2.new(0.5,-210,0.5,-150)
mainFrame.BackgroundColor3 = Color3.fromRGB(18,18,22)
mainFrame.ClipsDescendants = true  -- Включено для обрезки контента
mainFrame.Parent = screenGui
Instance.new("UICorner",mainFrame).CornerRadius = UDim.new(0,10)
local mstroke = Instance.new("UIStroke",mainFrame)
mstroke.Color = Color3.new(1,1,1)
mstroke.Transparency = 0.85
mstroke.Thickness = 1

local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,44)
titleBar.BackgroundColor3 = Color3.fromRGB(22,22,26)
titleBar.Parent = mainFrame
Instance.new("UICorner",titleBar).CornerRadius = UDim.new(0,10)
Drag(mainFrame, titleBar)

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0,300,1,0)
titleLabel.Position = UDim2.new(0,16,0,0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "NyoaSs | discord.gg/WBYkWfPQC2"
titleLabel.TextColor3 = Color3.fromRGB(240,240,245)
titleLabel.Font = Enum.Font.GothamMedium
titleLabel.TextSize = 15
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,40,0,40)
closeBtn.Position = UDim2.new(1,-44,0,2)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "x"
closeBtn.TextColor3 = Color3.fromRGB(255,100,100)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 26
closeBtn.ZIndex = 10
closeBtn.Parent = titleBar

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,40,0,40)
minimizeBtn.Position = UDim2.new(1,-84,0,2)
minimizeBtn.BackgroundTransparency = 1
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.fromRGB(200,200,200)
minimizeBtn.Font = Enum.Font.Gotham
minimizeBtn.TextSize = 30
minimizeBtn.ZIndex = 10
minimizeBtn.Parent = titleBar

local contentContainer = Instance.new("Frame")
contentContainer.Size = UDim2.new(1,0,1,-44)
contentContainer.Position = UDim2.new(0,0,0,44)
contentContainer.BackgroundTransparency = 1
contentContainer.ClipsDescendants = true
contentContainer.Parent = mainFrame

-- contentContainer
local line1 = Instance.new("Frame")
line1.Size = UDim2.new(1,-20,0,1)
line1.Position = UDim2.new(0,10,0,0)
line1.BackgroundColor3 = Color3.new(1,1,1)
line1.BackgroundTransparency = 0.8
line1.Parent = contentContainer

local line2 = Instance.new("Frame")
line2.Size = UDim2.new(1,-20,0,1)
line2.Position = UDim2.new(0,10,0,48)
line2.BackgroundColor3 = Color3.new(1,1,1)
line2.BackgroundTransparency = 0.8
line2.Parent = contentContainer

local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1,-20,0,46)
tabContainer.Position = UDim2.new(0,10,0,2)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = contentContainer

local tabs = {"Combat","Visuals","Performance","Misc","Settings"}
local pages = {}

for i,name in ipairs(tabs) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,76,1,0)
	btn.Position = UDim2.new(0,(i-1)*78,0,0)
	btn.BackgroundTransparency = 1
	btn.Text = name
	btn.TextColor3 = i==1 and Color3.new(1,1,1) or Color3.fromRGB(140,140,150)
	btn.Font = Enum.Font.GothamMedium
	btn.TextSize = 14
	btn.ZIndex = 5
	btn.Parent = tabContainer
	local ind = Instance.new("Frame")
	ind.Name = "Indicator"
	ind.Size = UDim2.new(0,60,0,2)
	ind.Position = UDim2.new(0.5,-30,1,-2)
	ind.BackgroundColor3 = Color3.new(1,1,1)
	ind.Visible = i==1
	ind.ZIndex = 6
	ind.Parent = btn
	btn.MouseButton1Click:Connect(function()
		for _,b in tabContainer:GetChildren() do
			if b:IsA("TextButton") then
				b.TextColor3 = Color3.fromRGB(140,140,150)
				if b:FindFirstChild("Indicator") then b.Indicator.Visible = false end
			end
		end
		btn.TextColor3 = Color3.new(1,1,1)
		ind.Visible = true
		for _,p in pages do p.Visible = (p.Name == name) end
	end)
end

local contentArea = Instance.new("Frame")
contentArea.Size = UDim2.new(1,-20,1,-106)
contentArea.Position = UDim2.new(0,10,0,50)
contentArea.BackgroundTransparency = 1
contentArea.Parent = contentContainer

for _,name in ipairs(tabs) do
	local page = Instance.new("Frame")
	page.Name = name
	page.Size = UDim2.new(1,0,1,0)
	page.BackgroundTransparency = 1
	page.Visible = name=="Combat"
	page.ZIndex = 3
	page.Parent = contentArea
	table.insert(pages,page)
end

-- Button Crеatiоn
local function createToggle(parent,text,yPos,callback)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1
	frame.Parent = parent

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1,-70,1,0)
	label.BackgroundTransparency = 1
	label.Text = text
	label.TextColor3 = Color3.fromRGB(200,200,200)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = frame

	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,52,0,26)
	btn.Position = UDim2.new(1,-62,0.5,-13)
	btn.BackgroundColor3 = Color3.fromRGB(60,60,65)
	btn.Text = ""
	btn.AutoButtonColor = false
	btn.Parent = frame
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,13)

	local circle = Instance.new("Frame")
	circle.Size = UDim2.new(0,20,0,20)
	circle.Position = UDim2.new(0,4,0.5,-10)
	circle.BackgroundColor3 = Color3.fromRGB(180,180,180)
	circle.Parent = btn
	Instance.new("UICorner",circle).CornerRadius = UDim.new(1,0)

	local state = false
	btn.MouseButton1Click:Connect(function()
		state = not state
		btn.BackgroundColor3 = state and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		TweenService:Create(circle,TweenInfo.new(0.2),{Position = state and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)}):Play()
		if callback then callback(state) end
	end)
	local function set(s)
		state = s
		btn.BackgroundColor3 = s and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		circle.Position = s and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)
	end
	set(state)
	return set
end

local function createButton(parent,text,yPos,callback)
	local frame = Instance.new("Frame",parent)
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1

	local btn = Instance.new("TextButton",frame)
	btn.Size = UDim2.new(1,0,1,0)
	btn.BackgroundColor3 = Color3.fromRGB(70,130,180)
	btn.Text = text
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 15
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)
	btn.MouseButton1Click:Connect(callback)
end

-- VisuАльчики
createToggle(contentArea.Visuals,"Xray [GUI]",10,function(state)
	xrayEnabled = state
	if state then
		XrayOn(obj)
		if xrayConnection then xrayConnection:Disconnect() end
		local last = tick()
		xrayConnection = RunService.Heartbeat:Connect(function()
			if tick()-last >= 1 then XrayOn(obj) last = tick() end
		end)
	else
		XrayOff(obj)
		if xrayConnection then xrayConnection:Disconnect() xrayConnection = nil end
	end
end)

-- обычный есп базы
createToggle(contentArea.Visuals,"Base ESP",58,function(state)
    if state then
        PlotESP_Enabled = true
        for _,p in obj:GetChildren()do if p:IsA("Model")then CreatePlotESP(p)end end
        obj.ChildAdded:Connect(function(p)task.wait(0.5)if p:IsA("Model")then CreatePlotESP(p)end end)
        obj.ChildRemoved:Connect(RemovePlotESP)
    else
        PlotESP_Enabled = false
        for p,_ in PlotESP_Data do RemovePlotESP(p) end
    end
end)

-- таймер
createToggle(contentArea.Visuals,"Plot Timer [Fixing...]",106,function(state)
    if state then
        for _,p in obj:GetChildren()do if p:IsA("Model")then CreateTimeESP(p)end end
        obj.ChildAdded:Connect(function(p)task.wait(0.5)if p:IsA("Model")then CreateTimeESP(p)end end)
        obj.ChildRemoved:Connect(RemoveTimeESP)
    else
        for p,_ in PlotTimeESP_Data do RemoveTimeESP(p) end
    end
end)

-- браинротики
createToggle(contentArea.Visuals,"Best Pet ESP",154,function(state)
    if state then
        EnableBestPetESP()
    else
        DisableBestPetESP()
    end
end)

-- ComВаТ
createButton(contentArea.Combat,"Melee Aura [GUI]",10,function()
	if getgenv().MeleeAuraLoaded then createNotify("Melee Aura already loaded!") return end
	getgenv().MeleeAuraLoaded = true
	loadstring(game:HttpGet("https://pastefy.app/QGZ2PBmO/raw"))()
end)

createToggle(contentArea.Combat,"Anti Ragdoll",58,function(state)
    if state then
        EnableRagdollDesync()
    else
        DisableRagdollDesync()
    end
end)

createToggle(contentArea.Combat,"Anti Knockback",106,function(state)
    if state then
        EnableAntiHit()
    else
        DisableAntiHit()
    end
end)

createToggle(contentArea,Combat,"Friends Allowed",154,function(state)
    if state then
        OpenFriendsGUI()
    else
        for _, scr in player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsFriendsToggle" then
                scr:Destroy()
            end
        end
        FriendsGUI_Enabled = false
    end
end)

-- Мisс
createToggle(contentArea.Misc,"Grapple Fly",10,function(state)
    if state then
        OpenNyoaFlyGrapple()
    else
        for _, scr in player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsFly" then
                scr:Destroy()
            end
        end
        NyoaFlyGrapple_Enabled = false
    end
end)

createToggle(contentArea.Settings,"Invisible",58,function(state)
    if state then
        OpenInvisible()
    else
        for _, scr in lp.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "InvisibleGUI" then
                scr:Destroy()
            end
        end
        Invisible_Enabled = false
    end
end)

createToggle(contentArea.Misc,"Unwalk [No Walk Anim]",106,function(state)
	local anim = player.Character and player.Character:FindFirstChild("Animate")
	if anim then anim.Disabled = state end
end)

createToggle(contentArea.Misc,"Float [Gui]",154,function(state)
    if state then
        OpenFloatGui()
    else
        for _, scr in pgui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSs_FloatGui" then
                scr:Destroy()
            end
        end
        FloatGui_Enabled = false
    end
end)

-- Anтi kик
local antiKickToggle = createToggle(contentArea.Settings, "Anti Kick", 10, function(state)
	if not state then
		createNotify("Anti Kick disabled! You can be kicked now.")
	else
		createNotify("Anti Kick enabled.")
	end
end)
antiKickToggle(true)

task.spawn(function()
	local hk = false
	for _, v in pairs(getgc(true)) do
		if typeof(v) == "table" then
			local fn = rawget(v, "observeTag")
			if typeof(fn) == "function" and not hk then
				hk = true
				hookfunction(fn, newcclosure(function(_, _)
					return {
						Disconnect = function() end,
						disconnect = function() end
					}
				end))
			end
		end
	end
end)

createToggle(contentArea.Misc,"NyoaSs Fly",58,function(state)
    if state then
        OpenNyoaFly()
    else
        for _, scr in player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsFly" then
                scr:Destroy()
            end
        end
        NyoaFly_Enabled = false
    end
end)

createToggle(contentArea.Settings,"Nyoa.Ss Boost",106,function(state)
    if state then
        OpenNyoaBoost()
    else
        for _, scr in player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsBoost" then
                scr:Destroy()
            end
        end
        NyoaBoost_Enabled = false
    end
end)

createButton(contentArea.Settings,"Nyoa Helper",154,function()
    loadstring(game:HttpGet("https://pastefy.app/MItLJzDI/raw"))()
end)

-- Perfomance Optimizaция
local optimizationEnabled=false
local optimConnection=nil
local function OptimOn() optimizationEnabled=true optimConnection=task.spawn(function() while optimizationEnabled do for _,v in workspace:GetDescendants() do if v:IsA("BasePart") and not v.Anchored and v.Parent~=player.Character and not v.Parent:FindFirstChild("Humanoid") then v:Destroy() end end task.wait(2) end end) end
local function OptimOff() optimizationEnabled=false if optimConnection then task.cancel(optimConnection) end end
createToggle(contentArea.Performance,"Delete Parts",10,function(state) if state then OptimOn() else OptimOff() end end)

-- Closing and minimizing ehh
local minimized = false

closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	createNotify("NyoaSs Unloading, Please wait:/")
	task.wait(6,3)
	screenGui:Destroy()
end)

minimizeBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,44)}):Play()
		minimizeBtn.Text = "+"
	else
		TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,300)}):Play()
		minimizeBtn.Text = "-"
	end

end)

